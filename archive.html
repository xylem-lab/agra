<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bulletin Archive | AGRA Regional Food Balance Sheet</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@600;700;800;900&family=Source+Sans+3:wght@400;600;700&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://use.typekit.net/dsu4vkr.css">
  
  <!-- Google Material Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
  
  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="Bulletins/2025/12_December_2025/data/static/XylemLab_logo.png">
  
  <style>
    /* Import styles from main page - for production, use external CSS file */
    /* Simplified version with key styles */
    
    :root {
      --color-coral: #D13C3A;
      --color-lime: #CDDC3C;
      --color-green: #64A635;
      --color-brown: #2E170E;
      --color-beige: #EFE7DA;
      --gray-100: #F8F9FA;
      --gray-200: #E9ECEF;
      --gray-600: #6C757D;
      --gray-800: #343A40;
      --font-display: 'nasalization', 'Libre Franklin', sans-serif;
      --font-body: 'Source Sans 3', sans-serif;
      --font-mono: 'JetBrains Mono', monospace;
      --spacing-2: 16px;
      --spacing-3: 24px;
      --spacing-4: 32px;
      --spacing-6: 48px;
      --spacing-8: 64px;
      --radius-md: 12px;
      --shadow-sm: 0 2px 8px rgba(46, 23, 14, 0.06);
      --shadow-md: 0 4px 24px rgba(46, 23, 14, 0.08);
      --shadow-lg: 0 8px 32px rgba(46, 23, 14, 0.12);
    }
    
    .material-symbols-outlined {
      font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
      vertical-align: middle;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: var(--font-body);
      color: var(--color-brown);
      background: #FFFFFF;
    }
    
    .page-header {
      background: linear-gradient(135deg, var(--color-beige) 0%, #FFFFFF 100%);
      padding: var(--spacing-8) var(--spacing-6);
      text-align: center;
    }
    
    .page-title {
      font-family: var(--font-display);
      font-weight: 400;
      font-size: clamp(36px, 5vw, 56px);
      color: var(--color-brown);
      margin-bottom: var(--spacing-2);
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }
    
    .page-subtitle {
      font-size: 18px;
      color: var(--gray-600);
      max-width: 600px;
      margin: 0 auto var(--spacing-4);
    }
    
    .back-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      color: var(--color-coral);
      text-decoration: none;
      font-weight: 600;
      margin-bottom: var(--spacing-3);
    }
    
    .back-link:hover {
      text-decoration: underline;
    }
    
    .archive-section {
      padding: var(--spacing-8) var(--spacing-6);
      max-width: 1280px;
      margin: 0 auto;
    }
    
    .filter-bar {
      display: flex;
      gap: var(--spacing-3);
      margin-bottom: var(--spacing-6);
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .filter-btn {
      padding: 12px 24px;
      border: 2px solid var(--gray-200);
      background: #FFFFFF;
      border-radius: 24px;
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .filter-btn:hover, .filter-btn.active {
      border-color: var(--color-coral);
      background: var(--color-coral);
      color: #FFFFFF;
    }
    
    .bulletins-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: var(--spacing-4);
    }
    
    /* Reuse bulletin card styles from main page */
    .bulletin-card {
      background: #FFFFFF;
      border-radius: var(--radius-md);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      transition: all 0.3s ease;
      border: 1px solid rgba(46, 23, 14, 0.1);
    }
    
    .bulletin-card:hover {
      transform: translateY(-6px);
      box-shadow: var(--shadow-md);
      border-color: var(--color-lime);
    }
    
    .bulletin-header {
      padding: var(--spacing-4);
      background: linear-gradient(135deg, var(--color-beige) 0%, #FFFFFF 100%);
      border-bottom: 2px solid var(--color-lime);
    }
    
    .bulletin-month {
      display: inline-block;
      background: var(--color-coral);
      color: #FFFFFF;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 700;
      text-transform: uppercase;
      margin-bottom: var(--spacing-2);
    }
    
    .bulletin-title {
      font-family: var(--font-display);
      font-weight: 400;
      font-size: 24px;
      color: var(--color-brown);
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }
    
    .bulletin-preview {
      height: 200px;
      background: var(--gray-100);
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .bulletin-content {
      padding: var(--spacing-4);
    }
    
    .bulletin-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: var(--spacing-3);
      border-top: 1px solid var(--gray-200);
    }
    
    .btn-primary {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 24px;
      background: var(--color-coral);
      color: #FFFFFF;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.2s ease;
    }
    
    .btn-primary:hover {
      background: #B8322E;
      transform: translateY(-2px);
    }
    
    .material-symbols-outlined {
      vertical-align: middle;
    }
    
    @media (max-width: 767px) {
      .bulletins-grid {
        grid-template-columns: 1fr;
      }
      
      .filter-bar {
        flex-direction: column;
        align-items: stretch;
      }
      
      .filter-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="page-header">
    <a href="index.html" class="back-link">
      <span class="material-symbols-outlined">arrow_back</span>
      Back to Home
    </a>
    
    <h1 class="page-title">Bulletin Archive</h1>
    <p class="page-subtitle">
      Browse all past crop yield forecast bulletins by year and month
    </p>
  </div>

  <section class="archive-section">
    <div class="filter-bar" id="filterBar">
      <button class="filter-btn active" data-year="all">All Years</button>
      <button class="filter-btn" data-year="2026">2026</button>
      <button class="filter-btn" data-year="2025">2025</button>
    </div>
    
    <div class="bulletins-grid" id="archiveGrid">
      <div style="text-align: center; padding: var(--spacing-6); grid-column: 1 / -1;">
        <div style="width: 40px; height: 40px; border: 4px solid var(--gray-200); border-top-color: var(--color-coral); border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto;"></div>
        <p style="margin-top: var(--spacing-3); color: var(--gray-600);">Loading bulletins...</p>
      </div>
    </div>
  </section>

  <style>
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>

  <script src="js/main.js"></script>
  <script>
    // Archive page specific JavaScript
    document.addEventListener('DOMContentLoaded', async () => {
      await displayArchive();
      setupFilters();
    });
    
    async function displayArchive() {
      // Load all bulletins
      await loadBulletins();
      
      const grid = document.getElementById('archiveGrid');
      grid.innerHTML = '';
      
      if (allBulletins.length === 0) {
        grid.innerHTML = `
          <div style="text-align: center; padding: var(--spacing-8); grid-column: 1 / -1;">
            <h3 style="color: var(--color-brown); margin-bottom: var(--spacing-2);">No bulletins found</h3>
            <p style="color: var(--gray-600);">Check back soon for new reports.</p>
          </div>
        `;
        return;
      }
      
      allBulletins.forEach((bulletin, index) => {
        const card = createBulletinCard(bulletin, index);
        card.setAttribute('data-year', bulletin.year);
        grid.appendChild(card);
      });
    }
    
    function setupFilters() {
      const filterBtns = document.querySelectorAll('.filter-btn');
      const cards = document.querySelectorAll('.bulletin-card');
      
      filterBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          // Update active state
          filterBtns.forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          
          const year = btn.getAttribute('data-year');
          
          // Filter cards
          cards.forEach(card => {
            const cardYear = card.getAttribute('data-year');
            if (year === 'all' || cardYear === year) {
              card.style.display = 'block';
            } else {
              card.style.display = 'none';
            }
          });
        });
      });
    }
  </script>
</body>
</html>
